var app = angular.module('app', []);

app.controller('postcontroller', function($scope, $http, $location){
	$scope.postDivAvailable = false;
	$scope.getDivAvailable = false;
	
	$scope.formCust;
	$scope.listCustomers = [];
	
	/** add customers **/
	$scope.addCustomer = function(){
		if($scope.formCust){
			$scope.listCustomers.push($scope.formCust);
			/*reset form customer **/
			$scope.formCust = null;
		}else{
			alert("please fill data customers.");
		}
	}
	
	/** delete customers **/
	$scope.deleteCustomer = function(index){
		$scope.listCustomers.splice(index, 1);
	}
	
	/** post list data customers **/
	$scope.postListDataCustomers = function(){
		var url = "http://localhost:8080/api/customer/saves";
		
		/**prepare config **/
		var config = {
				headers : {
					'Content-Type': 'application/json',
					'Accept': 'text/plain'
			}
		}
		
		/** declare data **/
		var dataArray = $scope.listCustomers;
		
		/** saves **/
		$http.post(url, dataArray, config).then(function (response){
			$scope.postDivAvailable = true;
			$scope.postCust = response.data;
			
			
		}, function error(response){
			$scope.postResultMessage = "Error status: " + 
				response.statusText;
		});
		
		
	}
	
});